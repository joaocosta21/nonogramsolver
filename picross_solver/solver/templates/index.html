<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Picross Solver</title>
    <style>
        #grid { display: grid; grid-template-columns: repeat(10, 30px); gap: 2px; }
        .cell { width: 30px; height: 30px; border: 1px solid black; text-align: center; }
        .filled { background: black; }
        .empty { background: white; }
    </style>
</head>
<body>
    <h1>Picross Solver</h1>
    <button onclick="solvePuzzle()">Solve</button>
    <div id="grid"></div>

    <script>
        async function solvePuzzle() {
            const response = await fetch('https://nonogramsolver.onrender.com/api/solve/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    rows: 5, cols: 5,
                    row_hints: [[1], [3], [5], [3], [1]],
                    col_hints: [[1], [3], [5], [3], [1]]
                })
            });
            const data = await response.json();
            animateSolving(data.steps);
        }

        function animateSolving(steps) {
            let index = 0;
            function updateGrid() {
                if (index >= steps.length) return;
                drawGrid(steps[index].state);
                index++;
                setTimeout(updateGrid, 500);
            }
            updateGrid();
        }

        function drawGrid(board) {
            const grid = document.getElementById('grid');
            grid.innerHTML = "";
            grid.style.gridTemplateColumns = `repeat(${board[0].length}, 30px)`;
            board.forEach(row => {
                row.split('').forEach(cell => {
                    const div = document.createElement('div');
                    div.classList.add('cell', cell === '#' ? 'filled' : 'empty');
                    grid.appendChild(div);
                });
            });
        }
    </script>
</body>
</html>
